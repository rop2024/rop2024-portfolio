<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Portfolio - {{ profile.name|default:"Developer" }}{% endblock %}</title>
    <meta name="description" content="{% block description %}Professional portfolio showcasing projects and skills{% endblock %}">
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    {% load static %}
    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="{% static 'css/dist/styles.css' %}">
    {# Debug: resolved static path for the compiled CSS (only visible in DEBUG/dev) #}
    {% if debug %}
    <!-- COMPILED_CSS_PATH: {{ STATIC_URL }}css/dist/styles.css -->
    {% endif %}
    
    <!-- Preload important images -->
    {% block preload_images %}{% endblock %}
    
    {% block extra_css %}{% endblock %}
</head>
<body class="font-sans bg-gradient-to-br from-neutral-50 via-blue-50 to-indigo-50 min-h-screen">
    <!-- Enhanced Navigation -->
    <!-- Navbar: solid background and show user's name (no logo) -->
    <nav class="fixed top-0 w-full z-50 bg-white border-b border-white/20">
        <div class="container-custom">
            <div class="flex justify-between items-center py-4">
                <!-- Show user's first name only (no underline) -->
                <a href="{% url 'home' %}" class="flex items-center space-x-3 group no-underline" id="nav-name-link">
                    <span id="nav-name" class="text-2xl font-bold text-neutral-800">
                        {{ profile.name|default:"Your Name" }}
                    </span>
                </a>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-1">
                    <a href="{% url 'home' %}#projects" class="nav-link">
                        Projects
                    </a>
                    <a href="{% url 'home' %}#about" class="nav-link">
                        About
                    </a>
                    <a href="{% url 'home' %}#contact" class="nav-link">
                        Contact
                    </a>
                    <a href="{% url 'stats' %}" class="nav-link">
                        Stats
                    </a>
                    <a href="{% url 'project_list' %}" class="btn-ghost ml-2">
                        View All Work
                    </a>
                </div>
                
                <!-- Enhanced Mobile menu button (match solid navbar background) -->
                <button class="md:hidden p-3 rounded-xl bg-white hover:bg-white/95 transition-all duration-300" id="mobile-menu-button" aria-label="Toggle menu">
                    <div class="w-6 h-6 relative">
                        <span class="absolute top-1/2 left-1/2 w-4 h-0.5 bg-neutral-700 transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300" id="menu-line-1"></span>
                        <span class="absolute top-1/2 left-1/2 w-4 h-0.5 bg-neutral-700 transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300" id="menu-line-2"></span>
                        <span class="absolute top-1/2 left-1/2 w-4 h-0.5 bg-neutral-700 transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300" id="menu-line-3"></span>
                    </div>
                </button>
            </div>
            
            <!-- Enhanced Mobile Navigation -->
            <div class="md:hidden hidden py-4 border-t border-white/20 animate-fade-in" id="mobile-menu">
                <div class="flex flex-col space-y-2">
                    <a href="{% url 'home' %}#projects" class="nav-link text-lg py-3">
                        Projects
                    </a>
                    <a href="{% url 'home' %}#about" class="nav-link text-lg py-3">
                        About
                    </a>
                    <a href="{% url 'home' %}#contact" class="nav-link text-lg py-3">
                        Contact
                    </a>
                    <a href="{% url 'stats' %}" class="nav-link text-lg py-3">
                        Stats
                    </a>
                    <a href="{% url 'project_list' %}" class="btn-secondary text-center mt-2">
                        View All Work
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-16">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="bg-white border-t border-neutral-200 mt-auto">
    <div class="container-custom py-12 lg:py-16">
        <div class="grid grid-cols-1 md:grid-cols-12 gap-10">
            
            <div class="md:col-span-4 space-y-4 p-6 bg-white rounded-lg shadow-sm">
                <a href="{% url 'home' %}" class="flex items-center space-x-3 group no-underline">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center shadow-lg">
                        <span class="text-white font-bold text-lg">P</span>
                    </div>
                    <span class="text-2xl font-bold text-neutral-800">{{ profile.name|default:"Your Name" }}</span>
                </a>
                <p class="text-neutral-600 leading-relaxed max-w-sm">
                    Crafting beautiful digital experiences with modern technologies and thoughtful design.
                </p>
                <div class="flex space-x-3 pt-2">
                    {% if profile.github %}
                    <a href="{{ profile.github }}" target="_blank" class="w-9 h-9 bg-white/50 hover:bg-white/70 rounded-full flex items-center justify-center transition-all duration-300 ring-1 ring-neutral-100" aria-label="GitHub">
                        <svg class="w-4 h-4 text-neutral-700" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12..."/></svg>
                    </a>
                    {% endif %}
                    {% if profile.linkedin %}
                    <a href="{{ profile.linkedin }}" target="_blank" class="w-9 h-9 bg-white/50 hover:bg-white/70 rounded-full flex items-center justify-center transition-all duration-300 ring-1 ring-neutral-100" aria-label="LinkedIn">
                        <svg class="w-4 h-4 text-neutral-700" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14..."/></svg>
                    </a>
                    {% endif %}
                    {% if profile.twitter %}
                    <a href="{{ profile.twitter }}" target="_blank" class="w-9 h-9 bg-white/50 hover:bg-white/70 rounded-full flex items-center justify-center transition-all duration-300 ring-1 ring-neutral-100" aria-label="Twitter">
                        <svg class="w-4 h-4 text-neutral-700" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57..."/></svg>
                    </a>
                    {% endif %}
                </div>
            </div>

                <div class="md:col-span-8 grid grid-cols-2 lg:grid-cols-3 gap-8 md:gap-10">

                <div class="p-6 rounded-lg bg-white shadow-md hover:shadow-lg transform transition duration-200 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-primary-100">
                    <h4 class="text-lg font-semibold text-neutral-800 mb-3">Navigation</h4>
                    <div class="flex flex-col space-y-2 text-base">
                        <a href="{% url 'home' %}" class="text-neutral-600 hover:text-primary-600 transition-colors">Home</a>
                        <a href="{% url 'project_list' %}" class="text-neutral-600 hover:text-primary-600 transition-colors">Projects</a>
                        <a href="{% url 'home' %}#about" class="text-neutral-600 hover:text-primary-600 transition-colors">About</a>
                        <a href="{% url 'home' %}#contact" class="text-neutral-600 hover:text-primary-600 transition-colors">Contact</a>
                    </div>
                </div>

                <div class="p-6 rounded-lg bg-white shadow-md hover:shadow-lg transform transition duration-200 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-primary-100">
                    <h4 class="text-lg font-semibold text-neutral-800 mb-3">Featured Work</h4>
                    <div class="flex flex-col space-y-2 text-base">
                        {% for project in featured_projects|slice:":3" %}
                        <a href="{% url 'project_detail' project.slug %}" class="text-neutral-600 hover:text-primary-600 line-clamp-1 transition-colors">→ {{ project.title }}</a>
                        {% empty %}
                        <p class="text-neutral-500 text-sm">No projects yet</p>
                        {% endfor %}
                        <a href="{% url 'project_list' %}" class="pt-1 text-sm font-medium text-primary-500 hover:text-primary-600 transition-colors">View All Projects</a>
                    </div>
                </div>

                <div class="p-6 rounded-lg bg-white shadow-md hover:shadow-lg transform transition duration-200 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-primary-100">
                    <h4 class="text-lg font-semibold text-neutral-800 mb-3">Get In Touch</h4>
                    <div class="space-y-2 text-base">
                        {% if profile.email %}
                        <a href="mailto:{{ profile.email }}" class="text-neutral-600 hover:text-primary-600 block transition-colors">{{ profile.email }}</a>
                        {% endif %}
                        {% if profile.location %}
                        <div class="text-neutral-600 text-sm">{{ profile.location }}</div>
                        {% endif %}
                        <a href="{% url 'home' %}#contact" class="inline-block mt-3 text-primary-500 font-medium hover:text-primary-600 transition-colors">Send Message →</a>
                    </div>
                </div>
            </div>
        </div>

                <hr class="mt-10 mb-6 border-t border-neutral-200">

        <div class="flex flex-col sm:flex-row sm:justify-between items-center text-center sm:text-left space-y-3 sm:space-y-0">
            <p class="text-neutral-500 text-sm order-2 sm:order-1">&copy; {% now "Y" %} <span class="font-semibold text-neutral-600">{{ profile.name|default:"Portfolio" }}</span>. Handcrafted with care.</p>
            <div class="flex space-x-6 text-sm text-neutral-500 order-1 sm:order-2">
                <a href="#" class="hover:text-primary-600 transition-colors">Privacy Policy</a>
                <a href="#" class="hover:text-primary-600 transition-colors">Terms</a>
                <a href="#" class="hover:text-primary-600 transition-colors">Sitemap</a>
            </div>
        </div>
    </div>
</footer>

    <!-- JavaScript -->
    <script>
        // Lazy load images with Intersection Observer
        if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        // swap data-src and data-srcset into src/srcset so the browser loads them
                        if (img.dataset.src) img.src = img.dataset.src;
                        if (img.dataset.srcset) img.srcset = img.dataset.srcset;
                        img.classList.remove('lazy');
                        imageObserver.unobserve(img);
                    }
                });
            });

            document.querySelectorAll('img[data-src]').forEach(img => {
                imageObserver.observe(img);
            });
        }

        // Mobile menu toggle (safe guards to avoid errors if elements are missing)
        (function() {
            const button = document.getElementById('mobile-menu-button');
            const menu = document.getElementById('mobile-menu');
            if (button && menu) {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    menu.classList.toggle('hidden');
                });

                // Close mobile menu when clicking outside
                document.addEventListener('click', function(event) {
                    if (!menu.contains(event.target) && !button.contains(event.target)) {
                        menu.classList.add('hidden');
                    }
                });
            }
        })();

        // Display only first name in navbar (client-side fallback)
        (function() {
            const el = document.getElementById('nav-name');
            if (el && el.textContent) {
                const first = el.textContent.trim().split(/\s+/)[0];
                if (first) el.textContent = first;
            }
        })();
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>